# wait_for_instance_running() {
#   local instance_name=$1
#
#   safe_out "info" "Instance ${instance_name} created. Waiting for instance to start..."
#
#   command="[ \$( nova show $instance_name | grep -cE \"status.*ACTIVE|status.*ERROR\" ) -eq 1 ]"
#   run_cmd_with_timeout "$command" ${2:-30}
#
#   instance_info="$(nova show $instance_name)"
#   status=$( echo "$instance_info" | awk '/status/ {print $4}' )
#   if [ "$status" == "ERROR" ]; then
#     safe_out "error" "Instance $instance_name failed to boot:"
#     safe_out $(get_fault_info "$instance_info")
#     exit 2
#   fi
# }
---
  hosts:
    tasks:
      -
